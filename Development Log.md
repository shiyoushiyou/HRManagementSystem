## 開發日誌 - 2023/10/07

# 行程管理
## 功能
- [ ] leave - applications
- [ ] Salary 
- [ ] Attendance - management
- [ ] employees - add
- [x] employees - search,update,delete
- [x] employees - info
- [x] Attendance - timeCard

## 今天的任务
- [ ] 重新設計員工表，修改欄位
- [ ] 修改DB欄位後須修改的後端前端代碼

## 明天的任務
- [ ] 製作employees - add功能的前端頁面(使用update的格式做修改即可)

### 整體頁面
- [x] 已確認之功能
    - 頁面跳轉時，session配置問題，導致左上用戶名會消失
      * 目前將跳轉更改成iframe後不會因為跳轉導致session出錯 
- [ ] 需要確認或新增的功能
    - [ ] session 過期後，頁面必須重新整理，以讓用戶重新登入才能進行操作。
          (目前session過期 後仍可操作頁面)
    - [ ] 頁面的功能按鈕是否過於多餘?
    - [ ] 帳號密碼管理，目前的員工ID過於簡單，是否更改員工號碼編碼方式或更改成下拉選單。

### 請假功能 /leave_applications
- [x] 已實現功能
    - 取得員工訊息並且紀錄員工的請假申請
- [ ] 需要確認或新增的功能
    - [ ] 更改前端頁面，顯示當月的出缺勤後在按鈕可申請請假。
      
### 薪水查看功能 / Salary
- [x] 已實現功能

- [ ] 需要確認或新增的功能

### 查詢員工資訊功能 /employees - add
- [x] 已實現功能
    - 添加員工訊息至DB功能
- [ ] 需要確認或新增的功能
    - 更改前端頁面，各個欄位的填寫驗證。追加員工號的登入欄位，
      並且將此欄位的編寫條件為(英文字母)+(今年的年份)+(4位亂碼)+(DB emp表中的id)
      *設計系統時沒有充分考慮，於是需要更改DB。(替代方案：DB一樣是自增的id，但後端代碼中重新編碼後顯示，login時輸入的id也將在後端重構後和DB驗證)

### 查詢員工資訊功能 /employees - search,update,delete
- [x] 已實現功能
    - 查詢員工資訊並顯示至頁面等邏輯
    - 前端頁面的改版 (searchEmployee.html)
    - 點擊詳細功能按鈕時彈窗效果之前端。
    - 詳細資訊頁面中的 重設密碼之功能完成。
    - 顯示彈窗頁面後的修改員工資訊功能，刪除員工功能。
    - 修改員工資訊功能 → 點擊按鈕之後，會出現"保存"按鈕，並且始可修改資訊之欄位狀態變為可修改，
      點擊保存鈕之後將欄位data傳送至controller進行處理
    - 刪除員工功能 → 點擊按鈕之後，會出現"確定刪除嗎?"的提示框，點擊確認後須輸入密碼，
      並且驗證成功後方可將員工資訊邏輯刪除。
    - 編輯員工訊息時的驗證(地址是否不是亂碼，不包含惡意command攻擊,手機號碼是否亂碼)
- [x] 待補足功能

### 員工資訊功能 /employees - info
- [x] 已實現功能
    - 查詢員工資訊並顯示至頁面等邏輯
    - 前端頁面的改版 (indexEmployee.html)
    - 由siderbar按鈕跳轉變更至左上頭像按鈕頁面跳轉(index.html)
    - 補足前端頁面跳轉設定，以及addObject將員工姓名顯示(index.html)
    - 變更密碼功能,密碼驗證功能實現
    - 取得員工個人資料方法返回值從List<>更改成Employeees，因為取得員工個人的資料只會有1筆
- [ ] 待補足功能
    - [ ] 測試前端版面更改後後端功能實現是否正常(跳轉OK，密碼變更OK，個人資訊變更功能待修改)
### 打卡功能 /Attendance - timeCard
- [x] 已實現功能
    - 打卡按鈕，已實現更新資料到DB的功能
    - 時間顯示，使用js去實現動態更新時間
    - 前端頁面的排版（參考網址https://www.youtube.com/watch?v=-1ltTrPUaBI&t=57s）
    - 前端後端時間並非互聯，或許處理上可以改進或需要改進?(待查證)，
      連結到後端後，DB與後端時間的資料型態不符，需重新審視資料型態。
      面對DB的資料型態，可以從是否需要為data型態為優先考量，
      如不需要的話更換成MYSQL與java默認轉換之型態會更好。
    - 將登入員工姓名顯示在打卡頁面上
- [x] 需補足的功能
- [ ] 打卡操作&規範
    - 操作: 先查詢最新的打卡紀錄，如符合規範，即可打卡
    - 規範:
        1. 如果最新一筆打卡紀錄日期與點擊上班按鈕時的日期相同，則不可打上班卡。(因為還沒上班不可能執行下班或是休息等操作，此規範也可制止重複打卡)
        2. 所以沒有今天日期的打卡紀錄，則可以執行打卡上班(下班，休息等按鈕有其他規範因)。
        3. 反之，如果點擊下班，休息等其他按鈕時，若沒有查詢到今天的上班打卡紀錄，那就不執行此類按鈕的動作。
        4. 下班紐：有查詢到今天的上班打卡紀錄及休息紀錄並且無打卡紀錄的情況下可執行
        休息開始紐：有查詢到今天的上班打卡紀錄並且無下班打卡紀錄的情況下可執行
        休息結束紐：有今日的休息開始紀錄並且無今日的休息結束紀錄即可執行
